function setHistoryState(){var n=history.state?history.state:{};n.isPageAlreadyVisited=!0;history.replaceState(n,"",window.location)}var firstInit=!0,noHashQueryInitialized=!1,filterManager,isPageAlreadyVisited=!1,visiblePage,reverseInfiniteScroll;$.address.externalChange(function(){filterManager=new FiltersManager;var n=window.location.hash;n?filterManager.requestProductsForSelectedFilters(null,null,null,n,undefined,undefined,undefined,isPageAlreadyVisited,visiblePage):firstInit||(filterManager.requestProductsForSelectedFilters(null,null,null,"NO HASH QUERY",noHashQueryInitialized,undefined,undefined,isPageAlreadyVisited),noHashQueryInitialized=!noHashQueryInitialized);firstInit=!1});typeof ReverseInfiniteScroll!="undefined"&&(reverseInfiniteScroll=new ReverseInfiniteScroll,reverseInfiniteScroll.init());$(document).ready(function(){setHistoryState()});$(document).on("nopAjaxFiltersFiltrationCompleteEvent",setHistoryState);window.onpopstate=function(){history.state&&(isPageAlreadyVisited=ajaxFiltersHistory.state().isPageAlreadyVisited,visiblePage=ajaxFiltersHistory.state().visiblePage)};